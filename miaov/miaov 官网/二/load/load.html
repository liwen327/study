<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        @keyframes move1
        {
            0%
            {
                transform:rotate(0deg);
            }
            100%
            {
                transform:rotate(360deg);
            }
        }
        #pic_bg{ width: 120px; height: 100px; background: url("images/loading2.png") no-repeat; margin:-20px 0 0 -50px; position: absolute; left: 50%; top: 50%;}
        #pic_1{ width: 120px; height: 100px; position: absolute; background: url("images/loading4.png") no-repeat; transition:all .2s; animation:move1 ease 1.2s infinite;}
        #pic_2{ width: 120px; height: 100px;  position: absolute; z-index: 2; top: 0; left: 0; text-align: center; line-height: 100px; font-size: 24px; color: #ec636d;}
    </style>
    <script>
        window.onload = function()
        {
            var pic_1 = document.getElementById("pic_1");
            var pic_2 = document.getElementById("pic_2");
            var aUrl = ['http://pic18.nipic.com/20111207/5252423_161443360000_2.jpg',
                'http://pic1.nipic.com/2008-12-09/2008129102741900_2.jpg',
                'http://2pic18.nipic.com/20111207/5252423_201705206000_2.jpg',
                'http://pic24.nipic.com/20121012/2256974_112957547000_2.jpg',
                'http://pic39.nipic.com/20140313/18141390_162517143162_2.jpg'];
            var iLength = 0;

            for(var i=0; i<aUrl.length; i++)
            {
                var oImg = new Image();
                oImg.index = i;
                oImg.onload = function()
                {
                    iLength++;
                    pic_2.innerHTML = iLength/aUrl.length*100 + "%";
                    if(iLength == aUrl.length)
                    {
                        pic_1.style.WebkitAnimationPlayState="paused";    //让动画停止
                    }
                }
                oImg.onerror = function()
                {
                    //alert(this.index);
                    iLength++;
                    pic_2.innerHTML = iLength/aUrl.length*100 + "%";
                    if(iLength == aUrl.length)
                    {
                        pic_1.style.WebkitAnimationPlayState="paused";
                    }
                }
                oImg.src = aUrl[i];
            }


        }
    </script>
</head>
<body>
<div class="box">
    <div id="pic_bg">
        <div id="pic_1"></div>
        <div id="pic_2">0</div>
    </div>
</div>
</body>
</html>