<!DOCTYPE html>
<html>
<head>
    <meta chartset="UTF-8">
    <title></title>
    <script>
        /*console.log((function(){console.log('123');}));
        var i = function(){return 10}();
        console.log(function(){return 10}());
        var str = function () {return 'f1';}();
        console.log(str);*/

        //立即执行表达式的用法：
        var f1 = function() {
            var res = [];
            var fun = null;
            for(var i = 0; i < 10; i++) {
                fun = function() { console.log(i);};//产生闭包
                res.push(fun);
            }
            return res;
        }
        var res = f1();
        for(var i =0; i<10; i++)
        {
            res[i]();    //这里会输出10个10，而不是0，1，2，3，4，5，6，7，8，9  因为这里产生了闭包，res会始终记得最后个运行结束之后的值，不释放
        }

        //改造一下，立即执行表达式在这里可以使程序输出0，1，2，3，4，5，6，7，8，9
        var f1 = function() {
            var res = [];
            var fun = null;
            for(var i = 0; i < 10; i++) {
                (function(index)
                {
                    fun = function() { console.log(index);};//产生闭包
                    res.push(fun);
                })(i)
            }
            return res;
        }
        var res = f1();
        for(var i=0;i<10;i++)
        {
            res[i]();
        }
    </script>
</head>
<body>

</body>
</html>